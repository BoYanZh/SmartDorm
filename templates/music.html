{% extends 'base.html' %}
{% block title %}Music{% endblock %}
{% block content %}
<div class="alert alert-warning" id="message"></div>
<div class="text-center">
    <div class="btn-group" role="group">
        <a class="btn btn-outline-primary" href="?command=start"><i class="fa fa-play" aria-hidden="true"></i></a>
        <a class="btn btn-outline-primary" href="?command=pause"><i class="fa fa-pause" aria-hidden="true"></i></a>
        <a class="btn btn-outline-primary" href="?command=next"><i class="fa fa-step-forward" aria-hidden="true"></i></a>
    </div>
    <div class="btn-group" role="group">
        <a class="btn btn-outline-primary" href="?command=vup"><i class="fa fa-volume-up" aria-hidden="true"></i></a>
        <a class="btn btn-outline-primary" href="?command=vdown"><i class="fa fa-volume-down" aria-hidden="true"></i></a>
    </div>
    <form class="form-inline pull-right" onsubmit="ajaxSubmit();return false;">
        <input class="form-control mr-sm-2" type="text" name="name" id="id_name" placeholder="添加歌曲">
        <button class="btn btn-outline-primary d-none d-md-block" type="button" onclick="ajaxSubmit();">
            <i class="fa fa-search" aria-hidden="true"></i>
        </button>
    </form>
</div>
{% if data_list %}
<p></p>
<table class="table table-striped table-sm">
    <thead>
        <th>id</th>
        <th>name</th>
    </thead>
    <tbody>
        {% for music in data_list %}
        <tr>
            <td>{{ music.song_id }}</td>
            <td><a href="?id={{ music.song_id }}">{{ music.song_name }}</a></td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="lead">None</p>
{% endif %}
{% endblock %}
{% block script %}
<script>
    $('#message').hide();

    function ajaxSubmit() {
        $('#message').html('申请已发出');
        $('#message').show();
        $.ajax({
            url: '/add_by_name',
            type: 'GET',
            data: {
                'name': $('#id_name').val(),
            },
            success: function (arg) {
                window.location = "/music"
            }
        });
    }
</script>
{% endblock %}